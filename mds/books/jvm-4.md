# 虚拟机类加载机制

> 2018-10-25

-   [1. 类加载的时机](#jvm-4-1)

---

## <a id="jvm-4-1">1. 类加载的时机</a>

下面 4 种情况下，类将被初始化：

1.  遇到 `new`、`getstatic`、`putstatic` 或 `invokestatic` 这 4 条指令的时，对应的类如果没有初始化，那么需要触发其初始化。

    4 条指令对应的 Java 代码场景是：
    
    1.  使用 new 关键字初始化对象的时候；
    1.  读取一个类的静态变量；
    1.  设置一个类的静态变量；
    1.  调用一个类的静态方法。

1.  使用 `java.lang.reflect` 包的方法对类进行反射调用的时候，如果类没有初始化，那么需要触发其初始化。

1.  当初始化一个类的时候，如果发现其父类还没有进行初始化，则需要先触发其父类的初始化。

1.  当虚拟机启动时，用户需要指定一个要执行的主类（包含 main() 方法的那个类），虚拟机会先初始化这个主类。
